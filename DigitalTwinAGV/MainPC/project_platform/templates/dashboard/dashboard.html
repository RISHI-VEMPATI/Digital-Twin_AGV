{%extends 'base.html' %}
{% load static %}
{% block head %}

<link rel="stylesheet" href="{% static 'dashboard.css' %}">

{% endblock head %}
{% block content %}

<div class="container-fluid">
    <!-- Navigation bar -->
    <div class="navbar">
        <a href="#">current Pickup</a>
        <a href="/history">History</a>
        <a href="#">About</a>
        <a href="#">Speed</a>
        <button class="status-button" onclick="toggleStatus()">Online</button>
    </div>

    <!-- Delay Info -->
    <div class="delay-info navbar">
        <p>Delayed by: <span id="delay-time">0 mins</span></p>
        <a href="/schedule">Schedule</a>
    </div>

    <!-- Map and Location Updates -->
    <div class="map-container">
        <h3>AGV Position on Path</h3>
        <!-- Line for AGV path -->
        <div class="line" style="width: 100%;"></div>
    
        <!-- Markers for A, B, C, D, E -->
        <div class="point" style="left: 5%;">A</div>
        <div class="point" style="left: 25%;">B</div>
        <div class="point" style="left: 50%;">C</div>
        <div class="point" style="left: 75%;">D</div>
        <div class="point" style="left: 95%;">E</div>
    
        <!-- AGV Marker -->
        <div id="agv" class="agv-marker" style="left: {{ agv_position }}%;"></div>
    </div>

    <!-- Tasks Completed Info -->
    <div class="info-box">
        <p>Number of tasks completed in the last 15 mins: <span id="tasks-completed">0</span></p>
    </div>
</div>

<script>
    // Toggle status button between online and offline
    function toggleStatus() {
        const statusButton = document.querySelector('.status-button');
        if (statusButton.classList.contains('offline')) {
            statusButton.classList.remove('offline');
            statusButton.textContent = 'Online';
        } else {
            statusButton.classList.add('offline');
            statusButton.textContent = 'Offline';
        }
    }
        // Update AGV position (simulated example)
    function updateAGVPosition(position) {
        const agvMarker = document.getElementById('agv');
        agvMarker.style.left = position + '%';
    }
    
        // Simulate AGV movement (in a real application, use WebSockets or AJAX to update)
    let currentPosition = {{ agv_position }};
    setInterval(() => {
        currentPosition = (currentPosition + 5) % 100;  // Simulate movement
        updateAGVPosition(currentPosition);
    }, 2000);  // Update every 2 seconds
</script>



{% endblock content %}